syntax = "proto3";

package se.auth;

import "options/packet_options.proto";
import "common/common_types.proto";
import "auth/types.proto";

message C_HandshakeReq {
  option (se.options.packet_id) = 1000;
  option (se.options.dir) = C2S;
  option (se.options.route) = AUTH;

  uint32 client_protocol_version = 1;
  string client_build = 2;
}

message S_HandshakeRes {
  option (se.options.packet_id) = 1001;
  option (se.options.dir) = S2C;
  option (se.options.route) = AUTH;

  se.common.Result result = 1;

  // 서버가 내려주는 "운영 값" (config -> handshake로 전달)
  uint32 server_tick_hz = 2;
  uint32 snapshot_hz = 3;

  uint32 server_protocol_version = 4;
  string server_build = 5;
}

message C_LoginReq {
  option (se.options.packet_id) = 1010;
  option (se.options.dir) = C2S;
  option (se.options.route) = AUTH;

  string id = 1;
  string pw = 2;
}

message S_LoginRes {
  option (se.options.packet_id) = 1011;
  option (se.options.dir) = S2C;
  option (se.options.route) = AUTH;

  se.common.Result result = 1;

  // 로그인 성공 시 내려줄 토큰/세션키 (선택)
  AuthToken token = 2;
}

message C_Ping {
  option (se.options.packet_id) = 1020;
  option (se.options.dir) = C2S;
  option (se.options.route) = AUTH;

  uint64 client_time_ms = 1;
}

message S_Pong {
  option (se.options.packet_id) = 1021;
  option (se.options.dir) = S2C;
  option (se.options.route) = AUTH;

  uint64 client_time_ms = 1;
  uint64 server_time_ms = 2;
}
